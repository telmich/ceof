\section{Interface between the chat server and the user interface ("`cs2ui"')}
\label{eofi2ui}
This section specifies how the user interface (UI) communicates with
the chat server (CS).
% Nico: 1.0
% -----------------------------------------------------------------------------
\subsection{Connection}
The chat server provides a TCP listener on port 6667, to which the UI connects 
to. Alternate ports may be used, but need to be specified explicitly.
% -----------------------------------------------------------------------------
\subsection{Messages}
All messages exchanged between CS and the UI are represented as a series
of fixed length strings. Every messages begins with a 
\textbf{command}. Messages send by the chat server use commands
beginning with \textbf{11}, messages send by the
UI use commands that begin with \textbf{21}.
% Nico: ok
% -----------------------------------------------------------------------------
\subsection{Message 1100: Acknowledge}
The is a general acknowledge answer. 
The request with the same \emph{ID} as the packet was successful.
\subsubsection{Parameters}
\begin{longtable}{|c|c|c|c|}
\caption{Command 1100 parameters}\\
\hline
\textbf{Parameter} & \textbf{Type} & \textbf{Description} & \textbf{Example}\\
\hline
ID & EOFsdt: id & packet id & afdb12\\
\hline
\end{longtable}
\subsubsection{Example}
\begin{verbatim}
1100abfudh
\end{verbatim}
% Nico: 2.0
% -----------------------------------------------------------------------------
\subsection{Message 1101: Failure}
The is a general failure answer. The request with the
same \emph{ID} as the packet failed.
Details are specified in the reason message.
\subsubsection{Parameters}
\begin{longtable}{|c|c|c|c|}
\caption{Command 1101 parameters}\\
\hline
\textbf{Parameter} & \textbf{Type} & \textbf{Description} & \textbf{Example}\\
\hline
ID & EOFsdt: id & packet id & afdb12\\
\hline
Reason & EOFsdt: msgtxt & Specifies the failure reason & Too many UIs connected.\\
\hline
\end{longtable}
If the failed command was "`2100"', the CS will close the socket afterwards.
\subsubsection{Example}
\begin{verbatim}
>>> import ceof
>>> ceof.fillup("1101abfudhThe Error Reason", 4+6+256)
'1101abfudhThe Error
Reason\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00'
\end{verbatim}
% Nico: 2.0
% -----------------------------------------------------------------------------
\subsection{Message 1102: Exit requested}
This is a shutdown request to the UI. After this message, the CS will exit.
\subsubsection{Parameters}
\begin{longtable}{|c|c|c|c|}
\caption{Command 1102 parameters}\\
\hline
\textbf{Parameter} & \textbf{Type} & \textbf{Description} & \textbf{Example}\\
\hline
ID & EOFsdt: id & packet id & afdb12\\
\hline
\end{longtable}
\subsubsection{Example}
\begin{verbatim}
1102abf93a
\end{verbatim}
% Nico: 2.0
% -----------------------------------------------------------------------------
\subsection{Message 1103: Received message}
This message is issued by the CS, if a message is received.
\subsubsection{Parameters}
\index{Command!1103}
\begin{longtable}{|c|c|c|c|}
\caption{Command 1103 parameters}\\
\hline
\textbf{Parameter} & \textbf{Type} & \textbf{Description} & \textbf{Example}\\
\hline
ID & EOFsdt: id & packet id & afdb12\\
\hline
name & EOFsdt: name & The sender & telmich\\
\hline
message & EOFsdt: msgtxt & The message & Hallo, mein Freund!\\
\hline
\end{longtable}
\subsubsection{Example}
\begin{verbatim}
>>> import ceof
>>> cmdid="1103abcdef"
>>> name=ceof.fillup("telmich", 128)
>>> message=ceof.fillup("Hallo, mein Freund!", 256)
>>> cmdid + name + message
'1103abcdeftelmich\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00Hallo, mein Freund!\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00'
\end{verbatim}
\subsubsection{Possible answers}
\begin{itemize}
\item None
\end{itemize}
% Nico: 2.0
% -----------------------------------------------------------------------------
\subsection{Message 1104: List of peers}
This is the answer to command \emph{2106}. It contains the same ID, as 
the \emph{2106} request command.
\subsubsection{Parameters}
\begin{longtable}{|c|c|c|c|}
\caption{Command 1104 parameters}\\
\hline
\textbf{Parameter} & \textbf{Type} & \textbf{Description} & \textbf{Example}\\
\hline
ID & EOFsdt: id & packet id & afdb12\\
\hline
Number of peers (nop) & EOFsdt: size & How many peers follow & 20\\
\hline
$nop * Peer$ & EOFsdt: name & The name & telmich\\
\hline
\end{longtable}
The last field is repeated as many times as specified in the number of peers
field.
\subsubsection{Example}
\begin{verbatim}
>>> import ceof
>>> cmd="1104"
>>> eofid = ceof.EOFID()
>>> id = eofid.get_next()
>>> nop=ceof.fillup("2", 6)
>>> peer1=ceof.fillup("telmich", 128)
>>> peer2=ceof.fillup("Hans-Jürgen", 128)
>>> cmd + id + nop + peer1 + peer2
'1104Y7Spet2\x00\x00\x00\x00\x00telmich\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00Hans-Jürgen\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
\end{verbatim}
% Nico: 2.0
% -----------------------------------------------------------------------------
\subsection{Message 1105: Peer information}
This is the answer to command \emph{2105}.
It contains the same ID, as the \emph{2105} request command.
\subsubsection{Parameters}
\begin{longtable}{|c|c|c|c|}
\caption{Command 1105 parameters}\\
\hline
\textbf{Parameter} & \textbf{Type} & \textbf{Description} & \textbf{Example}\\
\hline
ID & EOFsdt: id & packet id & afdb12\\
\hline
Keyid & EOFsdt: keyid & This peers pgp-keyid & 389E5481065EAA253...\\
\hline
Number of addresses (noa) & EOFsdt: size & & 2\\
\hline
$noa * address$ & EOFsdt: address & Adress of peer & tcp:127.0.0.1:4243\\
\hline
\end{longtable}
The last field is repeated as often, as specified in the number of addresses
field.
\subsubsection{Example}
\begin{verbatim}
>>> import ceof
>>> cmd="1105"
>>> eofid = ceof.EOFID()
>>> id = eofid.get_next()
>>> keyid="A35767A98CA9CC3CE368679AB679548202C9B17D"
>>> noa=ceof.fillup("2", 6)
>>> addr1=ceof.fillup("tcp://10.2.2.3:4242", 128)
>>> addr2=ceof.fillup("email://nico-eof42@schottelius.org", 128)
>>> cmd + id + keyid + noa + addr1 + addr2
'1105o0mZGMA35767A98CA9CC3CE368679AB679548202C9B17D2\x00\x00\x00\x00\x00
tcp://10.2.2.3:4242\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
email://nico-eof42@schottelius.org\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00'
\end{verbatim}
% Nico: 1.0
% -----------------------------------------------------------------------------
\subsection{Message 1106: Peer renamed}
This is the answer to command \emph{2104}. It contains the
same ID, as the \emph{2104} request command.
It is sent out to \textbf{all} connected user interfaces.
\subsubsection{Parameters}
\begin{longtable}{|c|c|c|c|}
\caption{Command 1106 parameters}\\
\hline
\textbf{Parameter} & \textbf{Type} & \textbf{Description} & \textbf{Example}\\
\hline
ID & EOFsdt: id & packet id & afdb12\\
\hline
Old peer name & EOFsdt: name & Old name & susi\\
\hline
New peer name & EOFsdt: name & New name & heinz\\
\hline
\end{longtable}
\subsubsection{Possible answers}
\begin{itemize}
\item None
\end{itemize}
\subsubsection{Example}
\begin{verbatim}
>>> import ceof
>>> cmd="1106"
>>> eofid = ceof.EOFID()
>>> id = eofid.get_next()
>>> oldname=ceof.fillup("telmich", 128)
>>> newname=ceof.fillup("Another Name", 128)
>>> cmd + id + oldname + newname
'1106FpSVy7telmich\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00Another Name\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00'
\end{verbatim}
% Nico: 2.0
% -----------------------------------------------------------------------------
\subsection{Message 2100: Register user interface}
This must be the \emph{first} message sent by the UI. 
If the answer is not \emph{1100}, the UI should close the connection afterwards.
\subsubsection{Parameters}
\begin{longtable}{|c|c|c|c|}
\caption{Command 2100 parameters}\\
\hline
\textbf{Parameter} & \textbf{Type} & \textbf{Description} & \textbf{Example}\\
\hline
ID & EOFsdt: id & packet id & afdb12\\
\hline
Name & EOFsdt: name & Name of the UI & ceofui\\
\hline
\end{longtable}

\subsubsection{Possible answers}
\begin{itemize}
\item 1100
\item 1101
\end{itemize}
\subsubsection{Example}
\begin{verbatim}
>>> import ceof
>>> cmd="2100"
>>> id = ceof.EOFID.int_to_id(42)
>>> name=ceof.fillup("ceofui", 128)
>>> cmd + id + name
'210000000Gceofui\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00'
\end{verbatim}
% Nico: 2.0
% -----------------------------------------------------------------------------
\subsection{Message 2101: Deregister user interface}
\subsubsection{Parameters}
\begin{itemize}
\item none
\end{itemize}
\subsubsection{Possible answers}
\begin{itemize}
\item none
\end{itemize}

The CS will close the connection to the UI after receiving this message.
\subsubsection{Example}
\begin{verbatim}
>>> import ceof
>>> cmd="2101"
>>> cmd
'2101'
\end{verbatim}
% Nico: 2.0
% -----------------------------------------------------------------------------
\subsection{Message 2102: /peer add}
The UI adds a peer to the list of known peers.

\subsubsection{Parameters}
\index{Command!2102: /peer add}%
\begin{longtable}{|c|c|c|c|}
\caption{2102: /peer add parameters}\\
\hline
\textbf{Parameter} & \textbf{Type} & \textbf{Description} & \textbf{Example}\\
\hline
ID & EOFsdt: id & packet id & afdb12\\
\hline
Peer name & EOFsdt: name & Name you identify the peer with & telmich\\
\hline
Address & EOFsdt: addr & Where we can make the first contact & tcp://10.0.42.42:4242\\
\hline
Keyid & EOFsdt: keyid & PGP fingerprint of the peers key & F27987E34E66...\\
\hline
\end{longtable}

\subsubsection{Possible answers}
\begin{itemize}
\item 1100
\item 1101
\end{itemize}
\subsubsection{Example}
\begin{verbatim}
>>> import ceof
>>> cmd="2102"
>>> name=ceof.fillup("telmich", 128)
>>> address=ceof.fillup("tcp://127.0.0.1:6667", 128)
>>> keyid="A35767A98CA9CC3CE368679AB679548202C9B17D"
>>> id = ceof.EOFID.int_to_id(42)
>>> cmd + id + name + address + keyid
'210200000Gtelmich\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00tcp://127.0.0.1:6667\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
A35767A98CA9CC3CE368679AB679548202C9B17D'
\end{verbatim}
% Nico: 1.0
% -----------------------------------------------------------------------------
\subsection{Message 2103: /peer del}
The UI wants to delete a peer.

\subsubsection{Parameters}
\index{Command!/peer del}%
\begin{longtable}{|c|c|c|c|}
\caption{2103: /peer del parameters}\\
\hline
\textbf{Parameter} & \textbf{Type} & \textbf{Description} & \textbf{Example}\\
\hline
ID & EOFsdt: id & packet id & afdb12\\
\hline
Name & EOFsdt: name & Name you identify the peer with & telmich\\
\hline
\end{longtable}

\subsubsection{Possible answers}
\begin{itemize}
\item 1100
\item 1101
\end{itemize}
% Nico: 1.0
\subsubsection{Example}
\begin{verbatim}
>>> import ceof
>>> cmd="2103"
>>> eofid = ceof.EOFID()
>>> id = eofid.get_next()
>>> name=ceof.fillup("telmich", 128)
>>> cmd + id + name
'2103hSJceCtelmich\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00'
\end{verbatim}
% -----------------------------------------------------------------------------
\subsection{Message 2104: /peer rename}
This messages is issued by the UI, when it wants to rename a peer.
\subsubsection{Parameters}
\index{Command!/peer rename}%
\begin{longtable}{|c|c|c|c|}
\caption{/peer rename parameters}\\
\hline
\textbf{Parameter} & \textbf{Type} & \textbf{Description} & \textbf{Example}\\
\hline
ID & EOFsdt: id & packet id & afdb12\\
\hline
Oldnick & EOFsdt: name & Old nick name & susi\\
\hline
Newnick & EOFsdt: name & New nick name & heinz\\
\hline
\end{longtable}

\subsubsection{Possible answers}
\begin{itemize}
\item 1106
\item 1101
\end{itemize}

\subsubsection{Example}
\begin{verbatim}
>>> import ceof
>>> cmd="2104"
>>> eofid = ceof.EOFID()
>>> id = eofid.get_next()
>>> oldname=ceof.fillup("telmich", 128)
>>> newname=ceof.fillup("Another Name", 128)
>>> cmd + id + oldname + newname
'2104zMpcG8telmich\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00Another Name\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00'
\end{verbatim}
% Nico: 2.0
% -----------------------------------------------------------------------------
\subsection{Message 2105: /peer show}
The UI requests details about a peer.

\subsubsection{Parameters}
\begin{longtable}{|c|c|c|c|}
\caption{2105: /peer show parameters}\\
\hline
\textbf{Parameter} & \textbf{Type} & \textbf{Description} & \textbf{Example}\\
\hline
ID & EOFsdt: id & packet id & afdb12\\
\hline
Peer name & EOFsdt: name & Name, as known by the CS & karl-otto\\
\hline
\end{longtable}

\subsubsection{Possible answers}
\begin{itemize}
\item 1101
\item 1105
\end{itemize}
\subsubsection{Example}
\begin{verbatim}
>>> import ceof
>>> cmd="2105"
>>> eofid = ceof.EOFID()
>>> id = eofid.get_next()
>>> name=ceof.fillup("telmich", 128)
>>> cmd  + id + name
'2105wRHWc8telmich\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00'
\end{verbatim}
% Nico: 1.0
% -----------------------------------------------------------------------------
\subsection{Message 2106: /peer list}
The UI requests the list of known peers.

\subsubsection{Parameters}
\begin{longtable}{|c|c|c|c|}
\caption{2106: /peer list parameters}\\
\hline
\textbf{Parameter} & \textbf{Type} & \textbf{Description} & \textbf{Example}\\
\hline
ID & EOFsdt: id & packet id & afdb12\\
\hline
\end{longtable}

\subsubsection{Possible answers}
\begin{itemize}
\item 1101
\item 1104
\end{itemize}
\subsubsection{Example}
\begin{verbatim}
>>> import ceof
>>> cmd="2106"
>>> eofid = ceof.EOFID()
>>> id = eofid.get_next()
>>> cmd + id
'2106LGMsYS'
\end{verbatim}
% Nico: 2.0
% -----------------------------------------------------------------------------
\subsection{Message 2107: /peer send}
The UI wants to submit a message to a peer.

\subsubsection{Parameters}
\index{Command!/peer send}%
\begin{longtable}{|c|c|c|c|}
\caption{2103: /peer send parameters}\\
\hline
\textbf{Parameter} & \textbf{Type} & \textbf{Description} & \textbf{Example}\\
\hline
ID & EOFsdt: id & packet id & afdb12\\
\hline
Peer name & EOFsdt: name & Name you identify the peer with & telmich\\
\hline
Message & EOFsdt: msgtxt & The message itself & Hallo, wie geht es Dir?\\
\hline
\end{longtable}

\subsubsection{Possible answers}
\begin{itemize}
\item 1100
\item 1101
\end{itemize}
\subsubsection{Example}
\begin{verbatim}
>>> import ceof
>>> cmd="2107"
>>> eofid = ceof.EOFID()
>>> id = eofid.get_next()
>>> name=ceof.fillup("telmich", 128)
>>> message=ceof.fillup("Hallo, telmich!", 256)
>>> cmd + id + name + message
'2107NassLAtelmich\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00Hallo, telmich!\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
\end{verbatim}
% Nico: 2.0
% -----------------------------------------------------------------------------
\subsection{Message 2199: /quit}
The user interface requests that the CS and all other UIs exit.

\subsubsection{Parameters}
\begin{longtable}{|c|c|c|c|}
\caption{2199: /quit parameters}\\
\hline
\textbf{Parameter} & \textbf{Type} & \textbf{Description} & \textbf{Example}\\
\hline
ID & EOFsdt: id & packet id & afdb12\\
\hline
\end{longtable}

\subsubsection{Possible answers}
\begin{itemize}
\item 1101
\item 1102
\end{itemize}
\subsubsection{Example}
\begin{verbatim}
>>> import ceof
>>> cmd="2199"
>>> eofid = ceof.EOFID()
>>> id = eofid.get_next()
>>> cmd + id
'2199ff5N-j'
\end{verbatim}
% Nico: 2.0
